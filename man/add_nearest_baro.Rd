% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/add_nearest_baro.R
\name{add_nearest_baro}
\alias{add_nearest_baro}
\title{Add nearest barometric data to logger time series}
\usage{
add_nearest_baro(
  input_data,
  path_to_output_folder,
  baro_data_path,
  metric = c("water level", "DO", "both"),
  max_km = 30,
  baro_site_selection = "auto",
  metadata_path
)
}
\arguments{
\item{input_data}{Data frame of logger records requiring barometric data
(e.g., output from \code{bind_hobo_files()} for water level or DO).}

\item{path_to_output_folder}{Directory where processed files with barometric
data will be written (e.g., \code{"data/testing/processed"}). Year-specific
\code{processed/} subfolders are created as needed.}

\item{baro_data_path}{Directory containing barometric CSV files, typically
the same processed folder used for barometric QAQC
(e.g., \code{"data/testing/processed"}).}

\item{metric}{Character; which metrics in \code{input_data} require
barometric data. Options: \code{"water level"}, \code{"DO"}, or
\code{"both"}.}

\item{max_km}{Maximum distance (km) to search for barometric stations in
automatic mode.}

\item{baro_site_selection}{Either \code{"auto"} (default) to automatically
select and stitch the nearest barometric stations, or a specific
\code{site_station_code} to force a single barometric station
(e.g., \code{"BARO_DARL_ST_30"}).}

\item{metadata_path}{Path to the metadata file used to identify logger sites
and barometric stations (e.g., \code{"data/testing/raw/testing_metadata.csv"}).}
}
\value{
A list of length two:
\describe{
\item{[\link{1}]}{A data frame containing \code{input_data} with appended
barometric fields (e.g., \code{airpress_kPa}, \code{airtemp_C},
\code{baro_site_stn_code}, \code{baro_qaqc_code}, etc.).}
\item{[\link{2}]}{A \code{ggplot2} QC plot showing barometric pressure through
time, coloured by barometric station code for each site.}
}
}
\description{
Attaches barometric pressure and air temperature to water-level and/or
dissolved oxygen logger data. Barometric data can be selected manually
(a single specified baro station) or automatically by choosing and
stitching the nearest barometric stations within a specified distance.
}
\details{
For each site and metric, yearly processed files with appended barometric
data are written to \code{path_to_output_folder}.
}
\examples{
\dontrun{
# Typical testing workflow paths -----------------------------

# Water-level data with barometric series added
level_bound <- bind_hobo_files(
  path_to_raw_folder   = "data/testing/raw/level",
  path_to_output_folder = "data/testing/processed",
  metadata_path        = "data/testing/raw/testing_metadata.csv"
)

wl_with_baro <- add_nearest_baro(
  input_data          = level_bound[[1]],
  path_to_output_folder = "data/testing/processed",
  baro_data_path      = "data/testing/processed",   # where BARO v0.1/v0.2 live
  metric              = "both",
  baro_site_selection = "auto",
  metadata_path       = "data/testing/raw/testing_metadata.csv"
)


# Example of manual baro-site selection (forcing one station)
wl_with_manual_baro <- add_nearest_baro(
  input_data          = level_bound[[1]],
  path_to_output_folder = "data/testing/processed",
  baro_data_path      = "data/testing/processed",
  metric              = "water level",
  baro_site_selection = "BARO_DARL_ST_30",
  metadata_path       = "data/testing/raw/testing_metadata.csv"
)
}

}
