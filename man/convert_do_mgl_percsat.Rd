% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/convert_do_mgl_percsat.R
\name{convert_do_mgl_percsat}
\alias{convert_do_mgl_percsat}
\title{Convert dissolved oxygen (mg/L) to percent air saturation}
\usage{
convert_do_mgl_percsat(do_data, output_dir, version_label = "v0.3")
}
\arguments{
\item{do_data}{A data frame containing DO, temperature, barometric
pressure, timestamp, and site identifiers. Must contain the columns:
\code{timestamp}, \code{site_station_code}, \code{do_mgl},
\code{watertemp_C}, and \code{airpress_kPa}.}

\item{output_dir}{Character scalar. Root folder where per-year,
per-site output files will be written. Must already exist.}

\item{version_label}{Character version string appended to output filenames
(e.g., \code{"v0.3"}).}
}
\value{
A data frame identical to \code{do_data} but with an additional
numeric column \code{do_percsat} (percent air saturation).
Files are written to disk as side effects.
}
\description{
Computes percent air saturation from dissolved oxygen concentrations
(\code{do_mgl}), water temperature (\code{watertemp_C}), and barometric
pressure (\code{airpress_kPa}), following standard Weiss (1970/1974)
oxygen solubility equations.
}
\details{
The function also writes per-site, per-year CSV files using the naming:

\preformatted{
  <site>_DO_<startdate>_<enddate>_<version>.csv
}

and stores them in:

\preformatted{
  <output_dir>/<year>/processed/
}

Input data must already be QA/QC'd and standardized to metric-based
column names:
\itemize{
\item \code{timestamp}        (POSIXct, UTC)
\item \code{site_station_code}
\item \code{do_mgl}           dissolved oxygen (mg/L)
\item \code{watertemp_C}      water temperature (\u00B0C)
\item \code{airpress_kPa}     barometric pressure (kPa)
}

Values of \code{-888.88} in \code{do_mgl} are treated as missing.

The calculation uses Weiss (1970, 1974) oxygen solubility equations.
Barometric pressure is internally converted from kPa to atmospheres.
}
\references{
Weiss, R. F. (1970). \emph{The solubility of nitrogen, oxygen and argon in water
and seawater.} Deep-Sea Research.

Weiss, R. F. (1974). \emph{Oxygen solubility in water and seawater based on
the virial equation.} Deep-Sea Research.
}
